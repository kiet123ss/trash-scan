<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Trash Scan</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
  <div class="app-shell">
    <!-- HEADER -->
    <header class="app-header">
      <div class="brand">
        <img src="/static/img/logo.png" alt="Trash Scan Logo" class="brand-logo-inline">

        <div class="brand-text">
          <h1>Trash Scan</h1>
          <p>Nh·∫≠n d·∫°ng r√°c & g·ª£i √Ω t√°i ch·∫ø th√¥ng minh</p>
        </div>
      </div>

      <div class="header-badge">
        <span>ƒê·ªì √°n t·ªët nghi·ªáp</span>
      </div>
    </header>


    <!-- MAIN GRID -->
    <main class="main-grid">
      <!-- LEFT COLUMN: Upload + Camera -->
      <div class="col-left">
        <div class="nav-tabs">
          <button class="tab-btn active" onclick="switchTab('upload-panel')">Upload ·∫£nh</button>
          <button class="tab-btn" onclick="switchTab('camera-panel')">Camera</button>
        </div>

        <section id="upload-panel" class="panel">
          <h2>Upload ·∫£nh ƒë·ªÉ nh·∫≠n d·∫°ng r√°c</h2>
          <p class="panel-desc">
            Ch·ªçn m·ªôt b·ª©c ·∫£nh ch·ª©a r√°c th·∫£i ƒë·ªÉ h·ªá th·ªëng ph√¢n t√≠ch v√† g·ª£i √Ω c√°ch x·ª≠ l√Ω.
          </p>
          <div class="upload-row">
            <label class="btn btn-secondary">
              üìÅ Ch·ªçn t·ªáp
              <input type="file" id="upload-input" accept="image/*" hidden>
            </label>
            <label class="btn btn-secondary">
              üì∑ Ch·ª•p ·∫£nh
              <input type="file" id="camera-input" accept="image/*" capture="environment" hidden>
            </label>
            <span id="file-name-display" style="margin-left: 10px; font-style: italic; color: #555;"></span>
            <button id="upload-btn" class="btn btn-primary">Nh·∫≠n d·∫°ng</button>
          </div>
          <div id="upload-result" class="result-box"></div>
        </section>

        <section id="camera-panel" class="panel hidden">
          <h2>Camera real-time</h2>
          <p class="panel-desc">
            B·∫≠t camera ƒë·ªÉ ch·ª•p nhanh v√† nh·∫≠n d·∫°ng tr·ª±c ti·∫øp t·ª´ m√¥i tr∆∞·ªùng xung quanh.
          </p>
          <div class="camera-wrapper">
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas" style="display:none;"></canvas>
          </div>
          <div class="button-row">
            <button id="start-cam" class="btn btn-secondary">B·∫≠t camera</button>
            <button id="switch-cam" class="btn btn-secondary hidden">ƒê·ªïi camera</button>
            <button id="save-cam" class="btn btn-primary hidden">üì∏ L∆∞u ·∫£nh</button>
          </div>
          <div id="cam-result" class="result-box"></div>
        </section>
      </div>

      <!-- RIGHT COLUMN: History + Map + Chatbot -->
      <div class="col-right">
        <section class="panel">
          <h2>L·ªãch s·ª≠ nh·∫≠n d·∫°ng</h2>
          <p class="panel-desc">
            C√°c l·∫ßn nh·∫≠n d·∫°ng g·∫ßn ƒë√¢y nh·∫•t ƒë∆∞·ª£c l∆∞u l·∫°i ƒë·ªÉ b·∫°n ti·ªán theo d√µi.
          </p>
          <div class="history-header">
            <button id="load-history" class="btn btn-outline">T·∫£i l·ªãch s·ª≠</button>
          </div>
          <ul id="history-list" class="history-list"></ul>
        </section>

        <section class="panel">
          <h2>ƒêi·ªÉm thu gom t√°i ch·∫ø g·∫ßn b·∫°n</h2>
          <p id="recycle-info" class="panel-desc">
            Sau khi nh·∫≠n d·∫°ng r√°c t√°i ch·∫ø, h·ªá th·ªëng s·∫Ω g·ª£i √Ω ƒëi·ªÉm thu gom ph√π h·ª£p g·∫ßn v·ªã tr√≠ c·ªßa b·∫°n.
          </p>
          <div class="map-search-box">
            <input type="text" id="place-search" placeholder="üîç T√¨m ki·∫øm: ƒëi·ªÉm thu gom, b√£i r√°c, t√°i ch·∫ø..." />
            <button id="search-place" class="btn btn-primary">T√¨m</button>
          </div>
          <div id="map" class="map-box"></div>
        </section>
      </div>
      <!--
      <section class="panel panel-full">
        <h2>Chatbot ‚Äì H·ªèi v·ªÅ r√°c th·∫£i & t√°i ch·∫ø</h2>
        <p class="panel-desc">
          ƒê·∫∑t c√¢u h·ªèi v·ªÅ ph√¢n lo·∫°i r√°c, c√°ch x·ª≠ l√Ω r√°c nguy h·∫°i, ho·∫∑c m·∫πo s·ªëng xanh h∆°n.
        </p>
        <div id="chat-window" class="chat-window"></div>
        <div class="chat-input-row">
          <input type="text" id="chat-input" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." />
          <button id="chat-send" class="btn btn-primary">G·ª≠i</button>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <span>Trash Scan ¬∑ YOLO11 ¬∑ H∆∞·ªõng t·ªõi m√¥i tr∆∞·ªùng xanh üå±</span>
    </footer>
  </div>
-->



      <!-- CHAT WIDGET N·ªîI G√ìC TR√ÅI -->
      <div class="chat-widget">
        <!-- N√∫t bubble ·ªü g√≥c tr√°i -->
        <button class="chat-launcher" id="chat-launcher">
          üí¨
        </button>

        <!-- C·ª≠a s·ªï chat -->
        <div class="chat-panel" id="chat-panel">
          <div class="chat-panel-header">
            <div class="chat-panel-title">
              <div class="chat-avatar">
                TS
              </div>
              <div>
                <div class="chat-title-main">Trash Scan Assistant</div>
                <div class="chat-title-sub">Tr·ª£ l√Ω r√°c th·∫£i & t√°i ch·∫ø</div>
              </div>
            </div>
            <button class="chat-close-btn" id="chat-close">√ó</button>
          </div>

          <div id="chat-window" class="chat-window"></div>

          <div class="chat-input-row">
            <input type="text" id="chat-input" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." />
            <button id="chat-send" class="btn btn-primary">G·ª≠i</button>
          </div>
        </div>
      </div>


      <script src="/static/js/main.js"></script>
      <!-- N·∫øu d√πng Google Maps API: thay YOUR_API_KEY b·∫±ng key c·ªßa b·∫°n -->
      <script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4gXOT-eQn2lSsIzJDf4emc-fpI-_2maE&libraries=places&callback=initMap">
        </script>
</body>

</html>